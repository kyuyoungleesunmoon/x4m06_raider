# X4M06 레이더 재밍 신호 복원 연구 - 실험 절차 매뉴얼

## 📋 실험 개요

본 연구는 차량용 X4M06 UWB 레이더의 재밍 신호 환경에서의 신호 복원 기술 개발을 목표로 하며, 체계적인 3단계 실험 절차를 통해 시뮬레이션부터 실제 하드웨어 검증까지 수행합니다.

### 🎯 연구 목표
- FMCW 레이더 재밍 신호 특성 분석
- 딥러닝 기반 신호 복원 알고리즘 개발
- 실제 하드웨어 환경에서의 성능 검증

### 🔧 실험 환경
- **레이더 모듈**: X4M06 UWB 레이더 (8.748 GHz, 1.4 GHz 대역폭)
- **개발 환경**: Python 3.6+, Windows PowerShell
- **주요 라이브러리**: scipy, h5py, matplotlib, numpy, tqdm

---

## 🚀 1단계: 시뮬레이션 기반 데이터셋 생성

### 📌 목표 및 기대효과

#### **주요 목표**
1. **합성 레이더 데이터셋 생성**: 다양한 재밍 시나리오를 포함한 대규모 학습 데이터 구축
2. **재밍 신호 특성 분석**: Clean 신호 대비 재밍 신호의 스펙트럼 특성 파악
3. **알고리즘 검증 기반 마련**: 딥러닝 모델 학습을 위한 Ground Truth 데이터 확보

#### **기대효과**
- ✅ **데이터 다양성 확보**: 1000+ 샘플로 다양한 재밍 시나리오 커버
- ✅ **비용 효율성**: 실제 재밍 장비 없이도 연구 수행 가능
- ✅ **재현성 보장**: 동일한 조건에서 반복 실험 가능
- ✅ **논문 기초자료**: 학술 발표용 시각화 데이터 확보

### 🔧 실험 절차

#### **Step 1-1: 환경 설정 및 의존성 확인**
```bash
# 작업 디렉토리 이동
cd C:\X4M06_레이더

# Python 환경 확인
python --version

# 필수 패키지 설치 확인
pip install -r requirements.txt
```

#### **Step 1-2: 시뮬레이션 파라미터 설정**
```python
# 기본 레이더 설정
radar_config = {
    'center_freq': 8.748e9,      # 중심 주파수 (Hz)
    'bandwidth': 1.4e9,          # 대역폭 (Hz) 
    'chirp_duration': 1e-3,      # 처프 지속시간 (s)
    'prf': 1000,                 # 펄스 반복 주파수 (Hz)
    'sampling_rate': 1e6,        # 샘플링 레이트 (Hz)
    'target_range': [5, 50],     # 타겟 거리 범위 (m)
    'target_velocity': [-30, 30], # 타겟 속도 범위 (m/s)
    'target_rcs': [0.1, 10],     # 타겟 RCS 범위 (m²)
    'num_jammers': [1, 5],       # 재머 개수 범위
    'jammer_power_ratio': [0.5, 2.0], # 재밍 파워 비율
    'freq_offset_range': [-0.1e9, 0.1e9], # 주파수 오프셋 (Hz)
    'time_offset_range': [0, 0.8e-3],     # 시간 오프셋 (s)
    'snr_db': [15, 25]           # SNR 범위 (dB)
}
```

#### **Step 1-3: 시뮬레이션 실행**
```bash
# 1000개 샘플 시뮬레이션 실행
python main_experiment.py --mode simulation --samples 1000
```

#### **Step 1-4: 결과 검증 및 분석**
```bash
# 생성된 데이터 분석
python analyze_hdf5.py

# 시각화 결과 확인
# experiment_results/session_YYYYMMDD_HHMMSS/simulation/ 디렉토리 확인
```

### 📊 출력 결과

#### **생성 파일**
1. **`radar_jamming_dataset_1000.h5`** (약 50MB)
   - Clean signals: (1000, 1000) complex64 배열
   - Jammed signals: (1000, 1000) complex64 배열  
   - Clean spectrograms: (1000, 512, 9) float32 배열
   - Jammed spectrograms: (1000, 512, 9) float32 배열

2. **`sample_visualization.png`**
   - 2×5 스펙트로그램 격자 시각화
   - Clean vs Jammed 신호 비교

3. **`metadata_1000.json`**
   - 각 샘플별 타겟/재머 파라미터 저장
   - 실험 설정 및 생성 시각 기록

#### **성공 기준**
- ✅ HDF5 파일 생성 완료 (50MB 내외)
- ✅ 시각화 이미지에서 재밍 효과 명확히 구분 가능
- ✅ 메타데이터 JSON 파일 정상 생성
- ✅ 에러 없이 전체 프로세스 완료

---

## 🔌 2단계: 하드웨어 기반 실제 데이터 수집

### 📌 목표 및 기대효과

#### **주요 목표**
1. **실제 환경 검증**: 시뮬레이션 모델의 현실적 타당성 검증
2. **하드웨어 특성 분석**: X4M06 모듈의 실제 신호 특성 파악
3. **벤치마크 데이터 확보**: 알고리즘 성능 평가를 위한 실측 데이터 수집

#### **기대효과**
- ✅ **모델 검증**: 시뮬레이션과 실제 데이터 간 상관성 확인
- ✅ **하드웨어 이해**: X4M06 모듈의 실제 동작 특성 파악
- ✅ **성능 벤치마크**: 실환경 기준 알고리즘 성능 측정
- ✅ **논문 신뢰성**: 실측 데이터 기반 연구 결과 제시

### 🔧 실험 절차

#### **Step 2-1: 하드웨어 연결 및 설정**
```bash
# USB 연결 확인
# Device Manager에서 X4M06 모듈 인식 확인
# COM 포트 번호 확인 (예: COM3)

# 연결 테스트
python x4m06_data_collector.py --test-connection --device COM3
```

#### **Step 2-2: 베이스라인 데이터 수집**
```bash
# 재밍 없는 환경에서 베이스라인 수집
python main_experiment.py --mode hardware --device COM3 --frames 1000
```

#### **Step 2-3: 재밍 환경 데이터 수집**
```bash
# 재밍 신호 인가 상태에서 데이터 수집
# (외부 재밍 장비 또는 소프트웨어 기반 재밍 신호 생성)
python main_experiment.py --mode hardware --device COM3 --frames 1000 --jamming-enabled
```

#### **Step 2-4: 다중 시나리오 데이터 수집**
```bash
# 다양한 거리/속도 타겟에 대한 데이터 수집
python x4m06_data_collector.py --multi-target-scenario --device COM3
```

### 📊 출력 결과

#### **생성 파일**
1. **`hardware_baseline_data.h5`**
   - 재밍 없는 순수 레이더 데이터
   - 다양한 타겟 시나리오별 측정값

2. **`hardware_jammed_data.h5`**
   - 재밍 환경에서 측정된 데이터
   - 재밍 강도별 신호 변화 기록

3. **`hardware_experiment_log.json`**
   - 실험 조건 및 하드웨어 설정 기록
   - 측정 시각 및 환경 정보

#### **성공 기준**
- ✅ X4M06 모듈과 정상 통신 확립
- ✅ 베이스라인 데이터 1000 프레임 수집 완료
- ✅ 재밍 환경 데이터 수집 완료
- ✅ 하드웨어 로그 파일 정상 생성

---

## 📈 3단계: 통합 분석 및 성능 평가

### 📌 목표 및 기대효과

#### **주요 목표**
1. **시뮬레이션-하드웨어 비교 분석**: 두 데이터셋 간 상관성 및 차이점 분석
2. **알고리즘 성능 평가**: 신호 복원 알고리즘의 정량적 성능 측정
3. **종합 결과 도출**: 연구 목표 달성도 평가 및 논문 작성용 결과 정리

#### **기대효과**
- ✅ **모델 신뢰성**: 시뮬레이션 모델의 현실 적합성 증명
- ✅ **성능 지표**: SNR 개선, 재밍 억제율 등 정량적 성과 측정
- ✅ **논문 완성**: 학술 발표용 종합 분석 결과 확보
- ✅ **기술 완성도**: 실용화 가능한 기술 수준 달성

### 🔧 실험 절차

#### **Step 3-1: 통합 데이터 분석**
```bash
# 시뮬레이션과 하드웨어 데이터 통합 분석
python main_experiment.py --mode analysis \
  --dataset experiment_results/session_*/simulation/radar_jamming_dataset_1000.h5 \
  --hardware-data experiment_results/session_*/hardware/hardware_baseline_data.h5
```

#### **Step 3-2: 신호 복원 알고리즘 평가**
```bash
# 딥러닝 모델 학습 및 평가
python train_restoration_model.py --train-data simulation --test-data hardware

# 성능 메트릭 계산
python evaluate_performance.py --metrics all
```

#### **Step 3-3: 논문용 시각화 생성**
```bash
# 학술 발표용 그래프 및 차트 생성
python create_paper_figures.py --output-dir paper_figures/
```

#### **Step 3-4: 종합 리포트 생성**
```bash
# 최종 분석 리포트 생성
python generate_final_report.py --format pdf --include-all
```

### 📊 출력 결과

#### **생성 파일**
1. **논문용 시각화 (paper_figures/)**
   - `figure1_target_characteristics.png`: 타겟 특성 분석
   - `figure2_jamming_characteristics.png`: 재밍 신호 특성
   - `figure3_signal_comparison.png`: 신호 복원 비교
   - `figure4_summary_statistics.png`: 종합 통계

2. **성능 평가 결과**
   - `performance_metrics.json`: 정량적 성능 지표
   - `correlation_analysis.xlsx`: 시뮬레이션-하드웨어 상관관계

3. **최종 종합 리포트**
   - `X4M06_레이더_분석_리포트.pdf`: 완성된 연구 결과서

#### **성공 기준**
- ✅ 시뮬레이션-하드웨어 데이터 상관계수 > 0.8
- ✅ 신호 복원 성능 SNR 개선 > 10dB
- ✅ 재밍 신호 억제율 > 80%
- ✅ 논문 품질 시각화 자료 완성

---

## 🎯 전체 실험 파이프라인 실행

### 자동화 실행 (권장)
```bash
# 모든 단계를 순차적으로 자동 실행
python main_experiment.py --mode all --samples 1000 --device COM3 --frames 1000
```

### 수동 단계별 실행
```bash
# 1단계: 시뮬레이션
python main_experiment.py --mode simulation --samples 1000

# 2단계: 하드웨어 (USB 연결 필요)
python main_experiment.py --mode hardware --device COM3 --frames 1000

# 3단계: 통합 분석
python main_experiment.py --mode analysis \
  --dataset experiment_results/session_*/simulation/radar_jamming_dataset_1000.h5
```

---

## 📋 체크리스트

### 1단계 완료 확인
- [ ] `radar_jamming_dataset_1000.h5` 파일 생성 (약 50MB)
- [ ] `sample_visualization.png` 시각화 완료
- [ ] `metadata_1000.json` 메타데이터 저장
- [ ] 에러 없이 시뮬레이션 완료

### 2단계 완료 확인  
- [ ] X4M06 USB 연결 및 인식 확인
- [ ] 베이스라인 데이터 1000 프레임 수집
- [ ] 재밍 환경 데이터 수집 완료
- [ ] 하드웨어 실험 로그 생성

### 3단계 완료 확인
- [ ] 시뮬레이션-하드웨어 데이터 비교 분석
- [ ] 논문용 시각화 4종 생성
- [ ] 성능 메트릭 계산 완료
- [ ] 최종 분석 리포트 생성

---

## 🚨 트러블슈팅

### 일반적인 문제 해결

#### **1단계 관련**
- **메모리 부족**: `--samples` 수를 줄여서 실행
- **한글 폰트 오류**: `Malgun Gothic` 폰트 설치 확인
- **scipy 오류**: `pip install --upgrade scipy` 실행

#### **2단계 관련**  
- **USB 인식 안됨**: Device Manager에서 드라이버 재설치
- **COM 포트 오류**: 올바른 포트 번호 확인 (`--device COM3`)
- **연결 타임아웃**: USB 케이블 교체 또는 다른 포트 사용

#### **3단계 관련**
- **데이터 호환성**: 파일 경로 및 형식 확인
- **분석 시간 과도**: `--quick-analysis` 옵션 사용
- **시각화 오류**: matplotlib 백엔드 설정 확인

### 지원 및 문의
- **GitHub Issues**: [Repository Issues](https://github.com/kyuyoungleesunmoon/x4m06_raider/issues)
- **기술 문서**: `X4DOC/` 디렉토리 참조
- **코드 참조**: 각 모듈별 docstring 확인

---

## 📚 참고 자료

### 주요 문서
- `실험코드_기술문서.md`: 상세 기술 문서
- `재밍신호_상세_설명서.md`: 재밍 신호 이론
- `X4M06_레이더_분석_리포트.md`: 기존 분석 결과

### 학술 참고문헌
- X4M06 데이터시트 (`x4_datasheet_revE_restricted.pdf`)
- XeThru 사용자 가이드 (`XTAN-13_XeThruX4RadarUserGuide_rev_a.pdf`)
- 펄스 기반 레이더 SoC 논문 (`A 118-mW Pulse-Based Radar SoC...pdf`)

---

**마지막 업데이트**: 2025년 9월 27일  
**버전**: v1.0  
**작성자**: X4M06 레이더 연구팀